{% if app.user != null %}
{% set isCurrentUser = app.user == argument.user %}
{% else %}
{% set isCurrentUser = false %}
{% endif %}
<div class="argument">
    <p class="text-bold">{{ argument.user.pseudo }}</p>
    <p class="argument-text">{{ argument.text }}</p>
    <div class="button-group justify-content-center votes">
        {% if isVoted %}
            <form method="post" action="{{ path('app_argument_unvote') }}" id="unvote-form-{{ argument.id }}">
                <input type="hidden" name="argumentId" value="{{ argument.id }}">
                <button class="button button-white">
                    <img src="{{ asset('image/vote_full.png') }}" class="icon-vote">
                </button>
            </form>
        {% else %}
            <form method="post" action="{{ path('app_argument_vote') }}" id="vote-form-{{ argument.id }}">
                <input type="hidden" name="argumentId" value="{{ argument.id }}">
                <button class="button button-white">
                    <img src="{{ asset('image/vote.png') }}" class="icon-vote">
                </button>
            </form>
        {% endif %}
        {{ argument.votes|length }} {{ 'argument.votes'|trans }}
    </div>
    <div class="button-group justify-content-center">
        {% if not isCurrentUser %}
            <form method="get" action="{{ path('app_argument_new') }}" id="respond-form-{{ argument.id }}">
                <input type="hidden" name="debate" value="{{ debateId }}">
                <input type="hidden" name="mainArgumentId" value="{{ argument.id }}">
                <button class="button button-white">{{ 'argument.respond'|trans }}</button>
            </form>
        {% else %}
            <form method="post" action="{{ path('app_debate_index') }}" id="edit-form-{{ argument.id }}">
                <button class="button button-white">{{ 'argument.edit'|trans }}</button>
            </form>
        {% endif %}
        <form method="post" action="{{ path('app_argument_report') }}" id="report-form-{{ argument.id }}">
            <input type="hidden" name="argumentId" value="{{ argument.id }}">
            <button class="button button-white">{{ 'argument.report'|trans }}</button>
        </form>
    </div>
    <div>
        {% for subArgument in argument.subArguments %}
            <p class="text-bold">{{ subArgument.user.pseudo }}</p>
            <p class="argument-text">{{ subArgument.text }}</p>
            <div class="button-group justify-content-center votes">
                {% if isVoted %}
                    <form method="post" action="{{ path('app_argument_unvote') }}" id="unvote-form-{{ subArgument.id }}">
                        <input type="hidden" name="argumentId" value="{{ subArgument.id }}">
                        <button class="button button-white">
                            <img src="{{ asset('image/vote_full.png') }}" class="icon-vote">
                        </button>
                    </form>
                {% else %}
                    <form method="post" action="{{ path('app_argument_vote') }}" id="vote-form-{{ subArgument.id }}">
                        <input type="hidden" name="argumentId" value="{{ subArgument.id }}">
                        <button class="button button-white">
                            <img src="{{ asset('image/vote.png') }}" class="icon-vote">
                        </button>
                    </form>
                {% endif %}
                {{ subArgument.votes|length }} {{ 'argument.votes'|trans }}
            </div>
            <div class="button-group justify-content-center">
                {% if isCurrentUser %}
                    <form method="post" action="{{ path('app_debate_index') }}" id="edit-form-{{ subArgument.id }}">
                        <button class="button button-white">{{ 'argument.edit'|trans }}</button>
                    </form>
                {% endif %}
                <form method="post" action="{{ path('app_argument_report') }}" id="report-form-{{ subArgument.id }}">
                    <input type="hidden" name="argumentId" value="{{ subArgument.id }}">
                    <button class="button button-white">{{ 'argument.report'|trans }}</button>
                </form>
            </div>
        {% endfor %}
    </div>
</div>